{"version":3,"file":"middleware.js","sourceRoot":"","sources":["../../../../projects/ngx-filemanager-api-firebase-demo/src/middleware.ts"],"names":[],"mappings":";;;AACA,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAE7B,SAAsB,OAAO,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;;oBAC3E,GAAG,CAAC,SAAS,CACX,8BAA8B,EAC9B,2FAA2F,CAC5F,CAAC;oBACF,GAAG,CAAC,SAAS,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;;;;oBAEhD,qBAAM,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;4BAChC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE;gCAC/B,OAAO,EAAE,CAAC;4BACZ,CAAC,CAAC,CAAC;wBACL,CAAC,CAAC,EAAA;;oBAJF,SAIE,CAAC;oBACH,IAAI,EAAE,CAAC;;;;oBAEP,MAAM,IAAI,KAAK,CAAC,OAAK,CAAC,OAAO,CAAC,CAAC;;;;;CAElC;AAhBD,0BAgBC;AAED,SAAsB,UAAU,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;YACxE,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;YAChB,GAAG,GAAG,qBACE,GAAG,CAAC,GAAG,iBACd,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,iBAClC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,WACjC,CAAC;YACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,EAAE,CAAC;;;;CACR;AATD,gCASC","sourcesContent":["import { NextFunction, Response, Request } from 'express';\nconst cors = require('cors');\n\nexport async function AddCors(req: Request, res: Response, next: NextFunction) {\n  res.setHeader(\n    'Access-Control-Allow-Headers',\n    'Authorization, X-Requested-With, Accept, Content-Type, Origin, Cache-Control, X-File-Name'\n  );\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  try {\n    await new Promise((resolve, reject) => {\n      cors({ origin: true })(req, res, () => {\n        resolve();\n      });\n    });\n    next();\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nexport async function LogRequest(req: Request, res: Response, next: NextFunction) {\n  const body = req.body;\n  const msg = `\n---- request: ${req.url}\nquery: ${JSON.stringify(req.query, null, 4)}\n body: ${JSON.stringify(body, null, 4)}\n----`;\n  console.log(msg);\n  next();\n}\n"]}
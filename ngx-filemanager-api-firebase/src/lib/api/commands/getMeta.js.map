{"version":3,"file":"getMeta.js","sourceRoot":"","sources":["../../../../../../../projects/ngx-filemanager-api-firebase/src/lib/api/commands/getMeta.ts"],"names":[],"mappings":";;;AAGA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAEjC,SAAsB,WAAW,CAC/B,MAAc,EACd,IAAY,EACZ,MAAwB;;;;;;oBAElB,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzB,OAAO,GAAG,MAAM,EAAE;yBACrB,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC;yBACjB,MAAM,EAAE,CAAC;oBACN,MAAM,GAAuB,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;oBACnD,qBAAM,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAA;;oBAA9C,YAAY,GAAG,SAA+B;oBAC9C,GAAG,GAAG,YAAY,CAAC,KAAK,EAAE,CAAC;oBACjC,sBAAO,GAAG,EAAC;;;;CACZ;AAbD,kCAaC","sourcesContent":["import { Bucket } from '../../types/google-cloud-types';\r\nimport { GetSignedUrlConfig } from '@google-cloud/storage';\r\nimport { UserCustomClaims } from 'ngx-filemanager-core/public_api';\r\nconst moment = require('moment');\r\n\r\nexport async function GetFileMeta(\r\n  bucket: Bucket,\r\n  item: string,\r\n  claims: UserCustomClaims\r\n): Promise<string> {\r\n  const file = bucket.file(item);\r\n  const in5mins = moment()\r\n    .add(5, 'minutes')\r\n    .toDate();\r\n  const config: GetSignedUrlConfig = { expires: in5mins, action: 'read' };\r\n  const signedResult = await file.getSignedUrl(config);\r\n  const url = signedResult.shift();\r\n  return url;\r\n}\r\n"]}
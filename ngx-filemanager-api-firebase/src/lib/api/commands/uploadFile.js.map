{"version":3,"file":"uploadFile.js","sourceRoot":"","sources":["../../../../../../../projects/ngx-filemanager-api-firebase/src/lib/api/commands/uploadFile.ts"],"names":[],"mappings":";;;AACA,2BAA6B;AAC7B,yDAA+D;AAG/D,SAAsB,UAAU,CAC9B,MAAc,EACd,aAAqB,EACrB,YAAoB,EACpB,QAAgB,EAChB,MAAc,EACd,MAAwB;;;;YAElB,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,YAAY,CAAC,CAAC;YACjD,YAAY,GAAG,kCAAmB,CAAC,OAAO,CAAC,CAAC;YAC5C,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACjC,WAAW,GAAG;gBAClB,WAAW,EAAE,QAAQ;aACtB,CAAC;YACF,sBAAO,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,EAAC;;;CACvC;AAfD,gCAeC","sourcesContent":["import { Bucket } from '../../types/google-cloud-types';\r\nimport * as path from 'path';\r\nimport { EnsureNoPrefixSlash } from '../../utils/path-helpers';\r\nimport { UserCustomClaims } from 'ngx-filemanager-core/public_api';\r\n\r\nexport async function UploadFile(\r\n  bucket: Bucket,\r\n  directoryPath: string,\r\n  originalname: string,\r\n  mimetype: string,\r\n  buffer: Buffer,\r\n  claims: UserCustomClaims\r\n) {\r\n  const newPath = path.join(directoryPath, originalname);\r\n  const pathNoPrefix = EnsureNoPrefixSlash(newPath);\r\n  const file = bucket.file(pathNoPrefix);\r\n  const fileOptions = {\r\n    contentType: mimetype\r\n  };\r\n  return file.save(buffer, fileOptions);\r\n}\r\n"]}